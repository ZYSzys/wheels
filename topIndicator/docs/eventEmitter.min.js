!function(){var root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{};function EventEmitter(){this.__events={}}EventEmitter.VERSION="1.0.0";var proto=EventEmitter.prototype;proto.on=function(eventName,listener){if(eventName&&listener){if(!function isValidListener(listener){return"function"==typeof listener||"object"==typeof listener&&isValidListener(listener.listener)}(listener))throw new TypeError("Listener must be a function!");var events=this.__events,listeners=events[eventName]=events[eventName]||[],listenerIsWrapped="object"==typeof listener;return-1===function(array,item){if(array.indexOf)return array.indexOf(item);var result=-1;item="object"==typeof item?item.listener:item;for(var i=0,len=array.length;i<len;i++)if(array[i].listener===item){result=i;break}return result}(listeners,listener)&&listeners.push(listenerIsWrapped?listener:{listener:listener,once:!1}),this}},proto.once=function(eventName,listener){return this.on(eventName,{listener:listener,once:!0})},proto.off=function(eventName,listener){var listeners=this.__events[eventName];if(listener){for(var index,i=0,len=listeners.length;i<len;i++)if(listeners[i]&&listeners[i].listener===listener){index=i;break}return void 0!==index&&listeners.splice(index,1,null),this}},proto.emit=function(eventName,args){var listeners=this.__events[eventName];if(listeners){for(var i=0;i<listeners.length;i++){var listener=listeners[i];listener&&(listener.listener.apply(this,args||[]),listener.once&&this.off(eventName,listener.listener))}return this}},proto.allOff=function(eventName){eventName&&this.__events[eventName]?this.__events[eventName]=[]:this.__events={}},"undefined"==typeof exports||exports.nodeType?root.EventEmitter=EventEmitter:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=EventEmitter),exports.EventEmitter=EventEmitter)}();